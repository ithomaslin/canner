#!/usr/bin/env node
var _ = require('lodash');
var prog = require('commander');

var pkg = require('../package.json');

var build = require('../lib/build');
var init = require('../lib/init');


var arg = process.argv;

// General options
prog
	.version(pkg.version)
	.usage('[options] <source to docgr.json, default ./docgr.json>')
	.option('-o, --output <directory>', 'Path to output directory, defaults to current directory')
	.option('-s, --serve <directory>', 'Path you want to start a local server. Default port 4000 for specific port use option -p')
	.option('-p, --port <port number>', 'Port which your local server start.')

// initialize the project
prog
	.command('init [source_dir]')
	.description('Create initial files and folders')
	.action(function(dir) {
    dir = dir || process.cwd();
    return init(dir);
	});

// building docs from docgr
prog
	.command('build [point to docgr.json]')
	.description('Build a docgr from a docgr.json')
	.action(function(dir) {
		return build.folder(dir, prog)
	});

// if empty
if(_.isEmpty(prog.parse(process.argv).args) && process.argv.length === 2) {
    prog.help();
}

