#!/usr/bin/env node

var Q = require('q');
var _ = require('lodash');
var prog = require('commander');

var pkg = require('../package.json');

var build = require('../lib/build');

// General options
prog
.version(pkg.version);

var buildCommand = function(command, action) {
    return command
    .option('-o, --output <directory>', 'Path to output directory, defaults to ./_web')
    .action(action);
}

buildCommand(prog
.command('build [source_dir]')
.description('Build a docgr from a directory'), build.folder);


// Parse and fallback to help if no args
if(_.isEmpty(prog.parse(process.argv).args) && process.argv.length === 2) {
    prog.help();
}